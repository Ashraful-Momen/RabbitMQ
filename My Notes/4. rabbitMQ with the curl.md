# ЁЯРЗ RabbitMQ ржмрж╛ржВрж▓рж╛ ржЧрж╛ржЗржб (cURL / Bash ржнрж┐рждрзНрждрж┐ржХ)

ржПржЗ ржЧрж╛ржЗржбрзЗ RabbitMQ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЬржирзНржп **cURL** ржУ **bash** ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржХрзЛржирзЛ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж┐ржВ рж▓рзНржпрж╛ржЩрзНржЧрзБржпрж╝рзЗржЬ (PHP/Python) ржжрж░ржХрж╛рж░ рж╣ржмрзЗ ржирж╛ред REST API ржЖрж░ `rabbitmqadmin` CLI ржжрж┐рзЯрзЗржЗ рж╕ржм ржХрж╛ржЬ ржХрж░рж╛ ржпрж╛ржмрзЗред

---

## ЁЯЪА RabbitMQ Management Plugin рж╕ржХрзНрж░рж┐ржпрж╝ ржХрж░рж╛

RabbitMQ Management Plugin ржЪрж╛рж▓рзБ ржерж╛ржХрж▓рзЗ HTTP API / UI ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛ржмрзЗред

```bash
rabbitmq-plugins enable rabbitmq_management
```

Management UI: [http://localhost:15672](http://localhost:15672)
REST API: [http://localhost:15672/api](http://localhost:15672/api)

---

## ЁЯФС Authentication (cURL ржжрж┐рзЯрзЗ)

RabbitMQ ржПрж░ ржбрж┐ржлрж▓рзНржЯ ржЗржЙржЬрж╛рж░/ржкрж╛рж╕: **guest / guest**

```bash
# рж╕рж╛рж░рзНржнрж╛рж░ рж╣рзЗрж▓рже ржЪрзЗржХ
curl -u guest:guest http://localhost:15672/api/overview
```

---

## ЁЯУж Queue рждрзИрж░рж┐ ржХрж░рж╛

```bash
curl -u guest:guest -H "content-type:application/json" \
 -X PUT -d '{"durable":true}' \
 http://localhost:15672/api/queues/%2f/myqueue
```

* `%2f` = default vhost
* `myqueue` = queue ржирж╛ржо

---

## ЁЯУв Exchange рждрзИрж░рж┐ ржХрж░рж╛

```bash
curl -u guest:guest -H "content-type:application/json" \
 -X PUT -d '{"type":"direct","durable":true}' \
 http://localhost:15672/api/exchanges/%2f/myexchange
```

---

## ЁЯФЧ Binding (Queue ржХрзЗ Exchange ржПрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд ржХрж░рж╛)

```bash
curl -u guest:guest -H "content-type:application/json" \
 -X POST -d '{"routing_key":"info"}' \
 http://localhost:15672/api/bindings/%2f/e/myexchange/q/myqueue
```

---

## тЬЙя╕П Message Publish (Producer ржХрж╛ржЬ)

```bash
curl -u guest:guest -H "content-type:application/json" \
 -X POST -d '{"properties":{},"routing_key":"info","payload":"Hello from cURL","payload_encoding":"string"}' \
 http://localhost:15672/api/exchanges/%2f/myexchange/publish
```

---

## ЁЯУе Message Consume (Queue ржерзЗржХрзЗ ржкрзЬрж╛)

```bash
curl -u guest:guest -H "content-type:application/json" \
 -X POST -d '{"count":5,"ackmode":"ack_requeue_false","encoding":"auto"}' \
 http://localhost:15672/api/queues/%2f/myqueue/get
```

---

## ЁЯУи Messaging Flow (Messing/Message Flow ржзрж╛рж░ржгрж╛)

1. Producer тЖТ Exchange ржП ржорзЗрж╕рзЗржЬ ржкрж╛ржарж╛рзЯред
2. Exchange тЖТ Routing Key ржжрзЗржЦрзЗ Queue рждрзЗ ржкрж╛ржарж╛рзЯред
3. Queue тЖТ Consumer ржорзЗрж╕рзЗржЬ consume ржХрж░рзЗред

ASCII Flow:

```
[Producer] --publish--> [Exchange] --route--> [Queue] --deliver--> [Consumer]
```

---

## ЁЯкж Dead Letter Exchange (DLX)

Queue ржП ржорзЗрж╕рзЗржЬ ржбрзЗрж▓рж┐ржнрж╛рж░ ржирж╛ рж╣рж▓рзЗ ржмрж╛ ржорзЗрзЯрж╛ржж рж╢рзЗрж╖ рж╣рж▓рзЗ ржЕржирзНржп Queue рждрзЗ ржкрж╛ржарж╛ржирзЛ ржпрж╛рзЯред

```bash
curl -u guest:guest -H "content-type:application/json" \
 -X PUT -d '{"arguments":{"x-dead-letter-exchange":"dlx_exchange"}}' \
 http://localhost:15672/api/queues/%2f/myqueue
```

---

## ЁЯФН Monitoring & Messages Check

```bash
# рж╕ржм queue рж▓рж┐рж╕рзНржЯ
curl -u guest:guest http://localhost:15672/api/queues

# queue рждрзЗ ржорзЗрж╕рзЗржЬ рж╕ржВржЦрзНржпрж╛ ржЪрзЗржХ
curl -u guest:guest http://localhost:15672/api/queues/%2f/myqueue
```

---

## ЁЯЫая╕П rabbitmqadmin CLI (ржЖрж░ржУ рж╕рж╣ржЬ ржЙржкрж╛ржпрж╝)

```bash
# ржЗржирж╕рзНржЯрж▓
wget http://localhost:15672/cli/rabbitmqadmin
chmod +x rabbitmqadmin

# Queue рждрзИрж░рж┐
./rabbitmqadmin declare queue name=myqueue durable=true

# Message publish
./rabbitmqadmin publish exchange=amq.default routing_key=myqueue payload="Hello World"

# Message get
./rabbitmqadmin get queue=myqueue requeue=false
```

---

## ЁЯУС Cheatsheet

* Queue рждрзИрж░рж┐ тЖТ `PUT /api/queues/...`
* Exchange рждрзИрж░рж┐ тЖТ `PUT /api/exchanges/...`
* Binding тЖТ `POST /api/bindings/...`
* Publish тЖТ `POST /api/exchanges/.../publish`
* Consume тЖТ `POST /api/queues/.../get`
* Dead Letter Exchange тЖТ Queue declare with `x-dead-letter-exchange`
* Check messages тЖТ `/api/queues/{vhost}/{name}`

---

тЬЕ ржПржЦржи рж╢рзБржзрзБ cURL ржмрж╛ bash ржжрж┐рзЯрзЗржЗ RabbitMQ ржПрж░ pub/sub, messaging, monitoring рж╕ржм ржХрж░рж╛ ржпрж╛ржмрзЗред
